<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HabitWeb ‚Äî –ì–ª–∞–≤–Ω–∞—è</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
<style>
.greeting-centered { text-align: center; margin: 2rem 0; font-size: 1.8rem; font-weight: 500; }
.theme-toggle-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  padding: 12px 14px;
  border-radius: 50%;
  border: none;
  background-color: var(--card-bg);
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
  cursor: pointer;
  font-size: 18px;
  transition: all 0.3s ease;
}
.theme-toggle-btn:hover {
  background-color: var(--accent);
  color: #fff;
}

.hero-header {
  background: url('img/hero-header.png') center center / cover no-repeat;
  width: 100%;
  height: 280px;
  margin-bottom: 2rem;
  border-radius: 0 0 12px 12px;
}

</style>
</head>
<body>
<div class="hero-header"></div>
  <header>
    <h1>HabitWeb</h1>
    <nav>
      <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="habits.html">–ü—Ä–∏–≤—ã—á–∫–∏</a>
      <a href="stats.html">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
      <a href="achievements.html">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
      <a href="calendar.html">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</a>
      <a href="settings.html">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
    </nav>
  </header>
  <main>
    <section class="card">
      <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ HabitWeb!</h2>
      <p>–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –¥–æ–±–∏–≤–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—é.</p>
    </section>

    <section class="card">
      <h3>–ú–æ—Ç–∏–≤–∞—Ü–∏—è –¥–Ω—è</h3>
      <blockquote><em>‚Äú–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ ‚Äî –ø–µ—Ä–≤—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –ø–æ–±–µ–¥—ã.‚Äù</em></blockquote>
    </section>

    
    <section class="card">
      <h3>–°–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –∑–∞–¥–∞—á–∏</h3>
      <ul id="daily-tasks-list">
        <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç–æ–º -->
      </ul>
      <h3>–ü—Ä–∏–≤—ã—á–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
      <div id="weeklyHabitsCard" class="card" style="margin-top: 1rem;"></div>
    </section>
    <script>
const tasks = [
      "–£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞",
      "–í—ã–ø–∏—Ç—å 2 –ª–∏—Ç—Ä–∞ –≤–æ–¥—ã",
      "–ü—Ä–æ—á–∏—Ç–∞—Ç—å 10 —Å—Ç—Ä–∞–Ω–∏—Ü –∫–Ω–∏–≥–∏",
      "–ú–µ–¥–∏—Ç–∞—Ü–∏—è ‚Äî 10 –º–∏–Ω—É—Ç"
    ];

    const listElement = document.getElementById("daily-tasks-list");
    const storedProgress = JSON.parse(localStorage.getItem("dailyProgress")) || {};

    function saveDailyStats() {
      const total = tasks.length;
      const completed = Object.values(storedProgress).filter(Boolean).length;
      const percentage = Math.round((completed / total) * 100);
      const today = new Date().toISOString().slice(0, 10);

      const history = JSON.parse(localStorage.getItem("historyProgress")) || {};
      history[today] = percentage;
      localStorage.setItem("historyProgress", JSON.stringify(history));
    }

    function renderTasks() {
      listElement.innerHTML = "";
      tasks.forEach((task, index) => {
        const li = document.createElement("li");
        li.style.display = "flex";
        li.style.alignItems = "center";
        li.style.gap = "10px";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = storedProgress[index] || false;
        checkbox.addEventListener("change", () => {
          storedProgress[index] = checkbox.checked;
          localStorage.setItem("dailyProgress", JSON.stringify(storedProgress));
          saveDailyStats();
        });

        const label = document.createElement("span");
        label.textContent = task;

        li.appendChild(checkbox);
        li.appendChild(label);
        listElement.appendChild(li);
      });
    }

    renderTasks();
    saveDailyStats();
    </script>
    
  </main>
  <footer>¬© 2025 –ì—é–ª–º–∞–º–µ–¥–æ–≤ –¢–∏–º—É—Ä –ù–∞–∑–∏–º–æ–≤–∏—á, 02172-–î–ë</footer>
  <script src="js/main.js"></script>

<!-- Theme toggle button -->





<script>
document.addEventListener("DOMContentLoaded", () => {
  const taskForm = document.getElementById("taskForm");
  const taskInput = document.getElementById("taskInput");
  const taskList = document.getElementById("taskList");

  function loadTasks() {
    const now = new Date();
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–º < 7 –¥–Ω–µ–π
    tasks = tasks.filter(task => {
      const added = new Date(task.date);
      const diffDays = (now - added) / (1000 * 60 * 60 * 24);
      return diffDays < 7;
    });

    localStorage.setItem("tasks", JSON.stringify(tasks));
    taskList.innerHTML = "";

    tasks.forEach((task, index) => {
      const li = document.createElement("li");
      li.style.marginBottom = "8px";

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.checked = task.done || false;
      checkbox.addEventListener("change", () => {
        tasks[index].done = checkbox.checked;
        localStorage.setItem("tasks", JSON.stringify(tasks));
        loadTasks();
      });

      const label = document.createElement("span");
      label.textContent = " " + task.text;
      if (task.done) {
        label.style.textDecoration = "line-through";
        label.style.color = "#888";
      }

      li.appendChild(checkbox);
      li.appendChild(label);
      taskList.appendChild(li);
    });
  }

  taskForm.addEventListener("submit", e => {
    e.preventDefault();
    const task = taskInput.value.trim();
    if (task) {
      const tasks = JSON.parse(localStorage.getItem("tasks")) || [];
      tasks.push({ text: task, date: new Date().toISOString(), done: false });
      localStorage.setItem("tasks", JSON.stringify(tasks));
      taskInput.value = "";
      loadTasks();
    }
  });

  loadTasks();
});
</script>


<script>
  function toggleTheme() {
    const currentTheme = document.body.classList.toggle("dark");
    localStorage.setItem("darkTheme", currentTheme);
  }

  window.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("darkTheme") === "true") {
      document.body.classList.add("dark");
    }
  });
</script>

<style>
  body.dark {
    background-color: #121212;
    color: #e0e0e0;
  }

  body.dark a {
    color: #90caf9;
  }

  body.dark .card,
  body.dark .calendar-card {
    background-color: #1e1e1e;
  }

  body.dark .progress-bar-container {
    background: #444;
  }
</style>

<!-- Theme toggle button -->
<button id="themeToggleBtn" class="theme-toggle-btn" onclick="toggleTheme()">üåì</button>


<script>
  function getHabitHistory() {
    return JSON.parse(localStorage.getItem("habitHistory")) || {};
  }

  function saveHabitHistory(history) {
    localStorage.setItem("habitHistory", JSON.stringify(history));
  }

  function getHabits() {
    return JSON.parse(localStorage.getItem("habitsData")) || [];
  }

  function getToday() {
    return new Date().toISOString().slice(0, 10);
  }

  function isWithinLast7Days(dateString) {
    const habitDate = new Date(dateString);
    const today = new Date();
    const diffTime = today - habitDate;
    const diffDays = diffTime / (1000 * 60 * 60 * 24);
    return diffDays <= 6;
  }

  function renderWeeklyHabitsCard() {
    const container = document.getElementById("weeklyHabitsCard");
    const history = getHabitHistory();
    const habits = getHabits();
    const today = getToday();

    container.innerHTML = "";
    habits
      .filter(habit => isWithinLast7Days(habit.date || today)) // —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ
      .forEach((habit, index) => {
        const wrapper = document.createElement("div");
        wrapper.style.display = "flex";
        wrapper.style.alignItems = "center";
        wrapper.style.gap = "10px";
        wrapper.style.marginBottom = "8px";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = history[today]?.includes(habit.id) || false;
        checkbox.addEventListener("change", () => {
          const updatedHistory = getHabitHistory();
          if (!updatedHistory[today]) updatedHistory[today] = [];
          if (checkbox.checked) {
            if (!updatedHistory[today].includes(habit.id)) {
              updatedHistory[today].push(habit.id);
            }
          } else {
            updatedHistory[today] = updatedHistory[today].filter(id => id !== habit.id);
          }
          saveHabitHistory(updatedHistory);
        });

        const label = document.createElement("span");
        label.textContent = habit.text;

        wrapper.appendChild(checkbox);
        wrapper.appendChild(label);
        container.appendChild(wrapper);
      });
  }

  renderWeeklyHabitsCard();
</script>

</body>
</html>